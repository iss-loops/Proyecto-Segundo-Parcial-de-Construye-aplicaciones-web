document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".nav-toggle"),t=document.getElementById("menu");e&&t&&e.addEventListener("click",()=>{const n="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",String(!n)),t.classList.toggle("abierto")});const n=document.getElementById("intro-audio");if(n){const e=document.getElementById("intro-audio-fallback"),t=document.getElementById("play-intro");let o,d;function i(){try{clearTimeout(o),n.pause(),n.currentTime=0}catch(e){}}function a(){clearTimeout(o),o=setTimeout(i,25e3),n.addEventListener("ended",i,{once:!0})}function r(e=.55,t=1800){clearInterval(d),n.volume=0;let o=0;const i=e/30,r=t/30;d=setInterval(()=>{o++,n.volume=Math.min(e,n.volume+i),o>=30&&clearInterval(d)},r)}function c(){const e=n.play();e&&e.then?e.then(()=>{a(),r()}).catch(()=>l()):setTimeout(()=>{n.paused?l():(a(),r())},400)}function l(){e&&(e.style.display="block")}t&&t.addEventListener("click",()=>{c(),e&&(e.style.display='none')}),c()}const o=document.querySelector(".contact-form");o&&o.addEventListener("submit",e=>{o.checkValidity()?(e.preventDefault(),alert("Mensaje simulado enviado. Gracias por escribir."),o.reset()):(e.preventDefault(),alert("Por favor completa los campos obligatorios."))})});